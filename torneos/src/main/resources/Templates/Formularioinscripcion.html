<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="fragments/header :: head('Crear Inscripción')"></head>
<body>
<div th:replace="fragments/header :: header"></div>

<main style="max-width: 800px; margin: 40px auto; background: white; padding: 40px; border-radius: 10px;">
    <h2>Crear Nueva Inscripción</h2>

    <form th:action="@{/inscripciones}" th:object="${inscripcion}" method="post">

        <!--  Buscador para equipos -->
        <label for="buscarEquipo">Buscar Equipo:</label><br>
        <input type="text" id="buscarEquipo" placeholder="Escribe para filtrar..." onkeyup="filtrarOpciones('buscarEquipo', 'equipo')"
               style="width: 100%; padding: 8px; margin-bottom: 10px;"><br>

        <label for="equipo">Equipo:</label><br>
        <select id="equipo" th:field="*{equipo}" required style="width: 100%; padding: 8px;">
            <option th:each="equipo : ${equipos}" th:value="${equipo.id}" th:text="${equipo.nombre}"></option>
        </select><br><br>

        <!--  Buscador para torneos -->
        <label for="buscarTorneo">Buscar Torneo:</label><br>
        <input type="text" id="buscarTorneo" placeholder="Escribe para filtrar..." onkeyup="filtrarOpciones('buscarTorneo', 'torneo')"
               style="width: 100%; padding: 8px; margin-bottom: 10px;"><br>

        <label for="torneo">Torneo:</label><br>
        <select id="torneo" th:field="*{torneo}" required style="width: 100%; padding: 8px;">
            <option th:each="torneo : ${torneos}" th:value="${torneo.id}" th:text="${torneo.deporte}"></option>
        </select><br><br>

        <label for="fechaInscripcion">Fecha de Inscripción:</label><br>
        <input type="date" id="fechaInscripcion" th:field="*{fechaInscripcion}" required style="width: 100%; padding: 8px;"><br><br>

        <label for="estado">Estado:</label><br>
        <input type="text" id="estado" th:field="*{estado}" value="Pendiente" style="width: 100%; padding: 8px;"><br><br>

        <button type="submit" style="padding: 10px 20px; background-color: #2c3e50; color: white; border: none; border-radius: 5px;">Crear Inscripción</button>
    </form>

    <p style="margin-top: 20px;">
        <a th:href="@{/inscripciones}">← Volver a la lista de inscripciones</a>
    </p>
</main>

<div th:replace="fragments/footer :: footer"></div>

<!-- Script para filtrar opciones en los <select> -->
<script>
    function filtrarOpciones(inputId, selectId) {
        const input = document.getElementById(inputId).value.toLowerCase();
        const select = document.getElementById(selectId);
        const opciones = select.getElementsByTagName("option");

        for (let i = 0; i < opciones.length; i++) {
            const texto = opciones[i].textContent.toLowerCase();
            opciones[i].style.display = texto.includes(input) ? "" : "none";
        }
    }
</script>
</body>
</html>

